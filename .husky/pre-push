#!/usr/bin/env sh

# Get the list of changed files between current branch and remote
CHANGED_FILES=$(git diff --name-only origin/main...HEAD | grep -E '\.(js|jsx|ts|tsx)$' | tr '\n' ' ')

if [ -n "$CHANGED_FILES" ]; then
  echo "Running tests for changed files: $CHANGED_FILES"
  npx jest --bail --findRelatedTests --passWithNoTests $CHANGED_FILES
else
  echo "No TypeScript/JavaScript files changed, skipping tests"
fi 